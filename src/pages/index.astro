---
import Background from "@components/Background.astro";
import Layout from "@layouts/Layout.astro";
import type { ImageMetadata } from "astro";

// Get all wallpapers using import.meta.glob
const wallpapers = Object.values(
  import.meta.glob<{ default: ImageMetadata }>('/src/assets/wallpapers/*.{jpeg,jpg,png,gif}')
);

// Select random wallpaper function and await only that one
const randomWallpaperModule = wallpapers[Math.floor(Math.random() * wallpapers.length)];
const randomWallpaper = await randomWallpaperModule();
---

<Layout
  backgroundImage={randomWallpaper.default.src}>
  <Background src={randomWallpaper.default} />
</Layout>